# =============================================================================
# REAL ESTATE BOT - Configuraci칩n Principal
# =============================================================================
# Uso: Copia este archivo a config.local.yaml y modifica los valores
# El archivo .local.yaml ser치 ignorado por git

# -----------------------------------------------------------------------------
# CONFIGURACI칍N GENERAL
# -----------------------------------------------------------------------------
general:
  # Modo de ejecuci칩n: 'production' o 'test'
  # En modo test no se env칤an notificaciones reales
  mode: "production"
  
  # Intervalo entre peticiones al mismo dominio (segundos)
  request_delay_min: 3
  request_delay_max: 5
  
  # N칰mero m치ximo de reintentos por petici칩n fallida
  max_retries: 3
  
  # Factor de backoff exponencial para reintentos
  retry_backoff_factor: 2
  
  # Timeout para peticiones HTTP (segundos)
  request_timeout: 30
  
  # Respetar robots.txt de cada portal
  respect_robots_txt: false
  
  # User agents rotativos (se selecciona uno aleatorio)
  user_agents:
    - "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36"
    - "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36"
    - "Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:121.0) Gecko/20100101 Firefox/121.0"
    - "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/17.2 Safari/605.1.15"
    - "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36 Edg/120.0.0.0"

# -----------------------------------------------------------------------------
# BASE DE DATOS
# -----------------------------------------------------------------------------
database:
  # Ruta al archivo SQLite
  path: "data/listings.db"
  
  # D칤as a mantener anuncios antiguos antes de limpiar
  retention_days: 90

# -----------------------------------------------------------------------------
# LOGGING
# -----------------------------------------------------------------------------
logging:
  # Nivel de logging: DEBUG, INFO, WARNING, ERROR, CRITICAL
  level: "DEBUG"
  
  # Directorio para archivos de log
  log_dir: "logs"
  
  # Formato del nombre de archivo de log
  log_file_pattern: "bot_{date}.log"
  
  # D칤as a mantener archivos de log
  retention_days: 30

# -----------------------------------------------------------------------------
# NOTIFICACIONES - EMAIL
# -----------------------------------------------------------------------------
email:
  enabled: false
  
  # Configuraci칩n SMTP
  smtp_server: "smtp.gmail.com"
  smtp_port: 587
  use_tls: true
  
  # Credenciales (usar variables de entorno en producci칩n)
  # SMTP_USERNAME y SMTP_PASSWORD
  username: "${SMTP_USERNAME}"
  password: "${SMTP_PASSWORD}"
  
  # Remitente y destinatarios
  from_address: "tu-email@gmail.com"
  to_addresses:
    - "destinatario1@email.com"
    - "destinatario2@email.com"
  
  # Asunto del email
  subject_template: "游 {count} nuevos pisos encontrados - {date}"

# -----------------------------------------------------------------------------
# NOTIFICACIONES - TELEGRAM
# -----------------------------------------------------------------------------
telegram:
  enabled: true
  
  # Token del bot (usar variable de entorno TELEGRAM_BOT_TOKEN)
  bot_token: "${TELEGRAM_BOT_TOKEN}"
  
  # Chat IDs a notificar (usar variable de entorno TELEGRAM_CHAT_IDS)
  # Formato: "123456789,987654321" (separados por coma)
  chat_ids: "${TELEGRAM_CHAT_IDS}"
  
  # Formato de mensajes
  parse_mode: "HTML"
  
  # Desactivar preview de enlaces
  disable_web_page_preview: false

# -----------------------------------------------------------------------------
# PORTALES A ESCANEAR
# -----------------------------------------------------------------------------
# Habilita/deshabilita portales individuales
portals:
  # Agregadores principales - Portales con m치s tr치fico y listados en Espa침a
  tucasa:
    enabled: true
    priority: 1
  idealista:
    enabled: true  # 50M+ visitas/mes, 1.2M+ listados
    priority: 1
  fotocasa:
    enabled: true  # 13M+ visitas/mes
    priority: 1
  pisos:
    enabled: true  # Portal establecido desde 1996
    priority: 1
  bienici:
    enabled: false
    priority: 2
  yaencontre:
    enabled: false  # Disabled temporarily - Selenium issues on Render
    priority: 2
  
  # Portales bancarios
  # Disabled due to anti-bot protection (403 Forbidden)
  # Properties from these banks are typically listed on aggregators like Idealista/Fotocasa
  altamira:
    enabled: false  # Blocked by anti-bot protection
    priority: 2
  haya:
    enabled: false  # Blocked by anti-bot protection
    priority: 2
  solvia:
    enabled: false  # Blocked by anti-bot protection
    priority: 2
  anticipa:
    enabled: false  # Not researched yet
    priority: 2
  servihabitat:
    enabled: false  # Often redirects to third-party sites
    priority: 2
  aliseda:
    enabled: false  # Blocked by anti-bot protection
    priority: 2
  bbva_valora:
    enabled: false
    priority: 2
  bankinter:
    enabled: false
    priority: 3
  kutxabank:
    enabled: false
    priority: 3
  ibercaja:
    enabled: false
    priority: 3
  cajamar:
    enabled: false
    priority: 3
  comprarcasa:
    enabled: false
    priority: 3

# -----------------------------------------------------------------------------
# RENDER.COM - KEEP ALIVE
# -----------------------------------------------------------------------------
keep_alive:
  enabled: true
  
  # URL del servicio en Render (configurar despu칠s del deploy)
  service_url: "${RENDER_SERVICE_URL}"
  
  # Intervalo de ping en minutos (m치ximo 14 para plan gratuito)
  ping_interval_minutes: 10
